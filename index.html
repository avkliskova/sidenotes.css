<!doctype html>
<style>
html {
  font: 16px/1.6 'Source Serif Pro', serif;
}

body {
  max-width: 900px;
  margin: auto;
  padding: 0 2ch;
}
</style>

<link href="sidenotes.css" type="text/css" rel="stylesheet" />

<article>
<h1>sidenotes.css</h1>

<p>sidenotes.css is a drop-in that provides <b>simple, semantic, accessible,<label class="sidenote-label" for="sidenote-1"></label><input type="checkbox" class="note-toggle" id="sidenote-1" /><small class="sidenote">Mostly. See below.</small> customizable, pure-CSS sidenotes.</b></p>

<p>This project was directly inspired by <a href="https://edwardtufte.github.io/tufte-css">Tufte-CSS</a>'s wonderful implementation of sidenotes. Tufte-CSS remains an excellent starting point for Web typography; I wanted to provide an alternative that isn't married so closely to Tufte's design choices.</p>

<h2>Why sidenotes?</h2>
<p><b>Sidenotes are convenient.</b> A sidenote takes advantage of your <a href="https://en.wikipedia.org/wiki/Eye_movement_in_reading#Saccades">natural reading behavior</a> by appearing immediately by its reference in body text, rather than being stuffed at the bottom.</p>

<h2>Why sidenotes.css?</h2>
<p>I know of no other solution for sidenotes that meets the following criteria:
<ul>
  <li>lightweight (&lt;3KB);</li>
  <li>released under a permissive license;</li>
  <li>uses mobile-first design;</li>
  <li>allows customization of sidenote and gutter width;</li>
  <li>eschews unnecessary<label class="marginnote-label" for="unnecessary"></label><input type="checkbox" class="note-toggle" id="unnecessary" /><small class="marginnote">For most use cases; see below.</small> JavaScript;</li>
  <li>is not bolted onto unrelated style directives, fonts, or frameworks;</li>
  <li>properly styles sidenotes inside headings, or other non-standard locations.</li>
</ul>
sidenotes.css attempts to fill this gap.
</p>
<p>sidenotes.css is also compatible with Tufte-CSS's naming scheme, and as such works on Tufte-CSS-formatted documents.</p>

<h2>Semantic structure</h2>
<p>sidenotes.css expects the content with sidenotes to appear in an <code>&lt;article&gt;</code>. All content inside that article needs to be wrapped in <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements">block-level elements.</a></p>
<p>That's it.</p>
<p>By contrast, Tufte-CSS expects the root <code>&lt;article&gt;</code> to be organized into <code>&lt;section&gt;</code>s. This is indeed more semantically correct, but it may conflict with the behavior of some static sites' exporters, causing difficult-to-fix problems.</p>

<p>
The actual sidenotes need to be formatted as follows:
</p>

<pre><code>&lt;p&gt;
  Lorem ipsum&lt;label class="sidenote-label" for="$checkbox-id"&gt;&lt;/label&gt;
  &lt;input type="checkbox" class="note-toggle" id="$checkbox-id" /&gt;
  &lt;small class="sidenote"&gt;Sidenote text&lt;/small&gt;
  dolor sit amet consectetur adispicing elit.
&lt;/p&gt;
</code></pre>

<p>
This produces:
</p>
<p>
  Lorem ipsum<label class="sidenote-label" for="$checkbox-id"></label>
  <input type="checkbox" class="note-toggle" id="$checkbox-id" />
  <small class="sidenote">Sidenote text</small>
  dolor sit amet consectetur adispicing elit.
</p>
<p>
For margin notes, use class names beginning with <code>marginnote</code> rather than <code>sidenote</code>.
</p>
<p>
  Tufte-CSS class names are also acceptable. To wit, <code>sidenote-label</code> may be replaced by <code>sidenote-number</code>, and <code>note-toggle</code> may be replaced by <code>margin-toggle</code>.
</p>

<h2>Limitations and best practices</h2>
<ul>
  <li>sidenotes.css cannot and does not handle certain accessibility concerns; see below.</li>
  <li>sidenotes.css was designed to suit my typographer's eye while remaining a minimalist solution. As I am not a professional typographer, you are encouraged to adjust its parameters.</li>
  <li>Sidenotes in collapsible elements (such as <code>&lt;details&gt;</code>) increment the counter only when visible. This behavior is baked into CSS, and I can't do much about it. Use a margin note instead.</li>
  <li>Up<label class="marginnote-label" for="one"></label><input type="checkbox" class="note-toggle" id="one"><small class="marginnote">One.</small>
    to<label class="marginnote-label" for="two"></label><input type="checkbox" class="note-toggle" id="two"><small class="marginnote">Two.</small>
    three<label class="marginnote-label" for="three"></label><input type="checkbox" class="note-toggle" id="three"><small class="marginnote">Three.</small>
    margin notes per element are supported. If you have more, consider changing them to sidenotes or restructuring your document.</li>
  <li>sidenotes.css does not and will not support nested sidenotes. This breaks the model, compromises accessibility, and is poor typographic practice; better is to include the content of the nested sidenote in the top-level sidenote.</li>
  <li>Sidenote labels appearing immediately before punctuation should be placed outside the punctuation. That is, don't do this<label class="sidenote-label" for="inside"></label><input type="checkbox" class="note-toggle" id="inside"><small class="sidenote">This sidenote is <em>inside</em> punctuation. This may cause the period that follows it to wrap to the next line by itself.</small>. Do this instead.<label class="sidenote-label" for="outside"></label><input type="checkbox" class="note-toggle" id="outside"><small class="sidenote">This sidenote is <em>outside</em> punctuation. Neither the period nor the sidenote will wrap.</small></li>
  <li>sidenotes.css relies solely on the usual box model logic to place sidenotes. If your document makes especially heavy use of sidenotes, this logic may break down, compromising readability. Consider restructuring your document or using a JavaScript solution such as <a href="">sidenotes.js</a>.</li>
</ul>

<h2>Accessibility</h2>
<p>sidenotes.css uses the checkbox hack. This raises accessibility concerns which CSS alone cannot remedy. See <a href="https://kittygiraudel.com/">Kitty Giraudel</a>'s <a href="https://dev.edenspiekermann.com/2016/03/07/introducing-a11y-toggle/">a11y-toggle</a> for more details and a fix.</p>
<p>In short, the checkbox hack breaks on IE &leq;8 and is incapable of setting some ARIA attributes dynamically. If you need to meet these needs, use sidenotes.css in conjunction with a11y-toggle.</p>

<h2>Licensing</h2>
<p>sidenotes.css is released under the <a href="">MIT License</a>. Significant portions of sidenotes.css were adapted from <a href="https://github.com/edwardtufte/tufte-css">Tufte-CSS</a>, which is copyright Dave Liepmann and licensed under MIT.</p>
</article>
